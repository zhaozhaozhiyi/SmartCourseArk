/*!
 * @antv/g-math
 * @description Geometry util
 * @version 3.0.1
 * @date 5/9/2025, 8:18:51 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(((t="undefined"!=typeof globalThis?globalThis:t||self).G=t.G||{},t.G.Math={}))}(this,(function(t){"use strict";function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,a=Array(n);n>r;r++)a[r]=t[r];return a}function r(t,r){if(t){if("string"==typeof t)return n(t,r);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(t,r):void 0}}function a(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var a,e,o,u,i=[],c=!0,f=!1;try{if(o=(r=r.call(t)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=o.call(r)).done)&&(i.push(a.value),i.length!==n);c=!0);}catch(t){f=!0,e=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(f)throw e}}return i}}(t,n)||r(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,n,r,a){var e=t-r,o=n-a;return Math.sqrt(e*e+o*o)}function u(t,n){var r=Math.min.apply(Math,e(t)),a=Math.min.apply(Math,e(n));return{x:r,y:a,width:Math.max.apply(Math,e(t))-r,height:Math.max.apply(Math,e(n))-a}}function i(t){return(t+2*Math.PI)%(2*Math.PI)}function c(t,n){var r=Math.abs(t);return n>0?r:-1*r}function f(t,n,r,a,e,o){return r*Math.cos(e)*Math.cos(o)-a*Math.sin(e)*Math.sin(o)+t}function h(t,n,r,a,e,o){return r*Math.sin(e)*Math.cos(o)+a*Math.cos(e)*Math.sin(o)+n}function l(t,n,r){return{x:t*Math.cos(r),y:n*Math.sin(r)}}function s(t,n,r){var a=Math.cos(r),e=Math.sin(r);return[t*a-n*e,t*e+n*a]}function y(t,n,r){return void 0===r&&(r=1e-5),t===n||r>Math.abs(t-n)}var v,p="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)}),v=new p(2),p!=Float32Array&&(v[0]=0,v[1]=0);function M(t,n,r,a,u,i){var c=-1,f=1/0,h=[r,a],l=20;i&&i>200&&(l=i/10);for(var s=1/l,y=s/10,v=0;l>=v;v++){var p=v*s,M=[u.apply(void 0,e(t.concat([p]))),u.apply(void 0,e(n.concat([p])))],g=o(h[0],h[1],M[0],M[1]);f>g&&(c=p,f=g)}if(0===c)return{x:t[0],y:n[0]};if(1===c){var d=t.length;return{x:t[d-1],y:n[d-1]}}f=1/0;for(var x=0;32>x&&1e-4<=y;x++){var b=c-y,m=c+y,P=[u.apply(void 0,e(t.concat([b]))),u.apply(void 0,e(n.concat([b])))],A=o(h[0],h[1],P[0],P[1]);if(b>=0&&f>A)c=b,f=A;else{var I=[u.apply(void 0,e(t.concat([m]))),u.apply(void 0,e(n.concat([m])))],q=o(h[0],h[1],I[0],I[1]);1>=m&&f>q?(c=m,f=q):y*=.5}}return{x:u.apply(void 0,e(t.concat([c]))),y:u.apply(void 0,e(n.concat([c])))}}function g(t,n,r,a,e){return{x:(1-e)*t+e*r,y:(1-e)*n+e*a}}function d(t,n,r,a,e,u){var i=(r-t)*(e-t)+(a-n)*(u-n);return 0>i?o(t,n,e,u):i>(r-t)*(r-t)+(a-n)*(a-n)?o(r,a,e,u):x(t,n,r,a,e,u)}function x(t,n,r,a,e,o){var u=[r-t,a-n];if(function(t,n){return t[0]===n[0]&&t[1]===n[1]}(u,[0,0]))return Math.sqrt((e-t)*(e-t)+(o-n)*(o-n));var i=[-u[1],u[0]];return function(t,n){var r=n[0],a=n[1],e=r*r+a*a;e>0&&(e=1/Math.sqrt(e)),t[0]=n[0]*e,t[1]=n[1]*e}(i,i),Math.abs(function(t,n){return t[0]*n[0]+t[1]*n[1]}([e-t,o-n],i))}function b(t,n,r,a,e){var o=1-e;return o*o*o*t+3*n*e*o*o+3*r*e*e*o+a*e*e*e}function m(t,n,r,a,e){var o=1-e;return 3*(o*o*(n-t)+2*o*e*(r-n)+e*e*(a-r))}function P(t,n,r,a){var e,o,u,i=-3*t+9*n-9*r+3*a,c=6*t-12*n+6*r,f=3*n-3*t,h=[];if(y(i,0))y(c,0)||0>(e=-f/c)||e>1||h.push(e);else{var l=c*c-4*i*f;y(l,0)?h.push(-c/(2*i)):l>0&&(o=(-c-(u=Math.sqrt(l)))/(2*i),0>(e=(-c+u)/(2*i))||e>1||h.push(e),0>o||o>1||h.push(o))}return h}function A(t,n,r,a,u,i,c,f,h){if(0===h)return function(t,n){for(var r=0,a=t.length,e=0;a>e;e++)r+=o(t[e],n[e],t[(e+1)%a],n[(e+1)%a]);return r/2}([t,r,u,c],[n,a,i,f]);var l=function(t,n,r,a,e,o,u,i,c){var f=b(t,r,e,u,c),h=b(n,a,o,i,c),l=g(t,n,r,a,c),s=g(r,a,e,o,c),y=g(e,o,u,i,c),v=g(l.x,l.y,s.x,s.y,c),p=g(s.x,s.y,y.x,y.y,c);return[[t,n,l.x,l.y,v.x,v.y,f,h],[f,h,p.x,p.y,y.x,y.y,u,i]]}(t,n,r,a,u,i,c,f,.5),s=[].concat(e(l[0]),[h-1]),y=[].concat(e(l[1]),[h-1]);return A.apply(void 0,e(s))+A.apply(void 0,e(y))}function I(t,n,r,a,e,o,u,i,c,f,h){return M([t,r,e,u],[n,a,o,i],c,f,b,h)}function q(t){for(var n=0,r=[],a=0;t.length-1>a;a++){var e=t[a],u=t[a+1],i=o(e[0],e[1],u[0],u[1]);r.push({from:e,to:u,length:i}),n+=i}return{segments:r,totalLength:n}}function w(t){if(2>t.length)return 0;for(var n=0,r=0;t.length-1>r;r++){var a=t[r],e=t[r+1];n+=o(a[0],a[1],e[0],e[1])}return n}function T(t,n){if(n>1||0>n||2>t.length)return null;var r=q(t),a=r.segments,e=r.totalLength;if(0===e)return{x:t[0][0],y:t[0][1]};for(var o=0,u=null,i=0;a.length>i;i++){var c=a[i],f=c.from,h=c.to,l=c.length/e;if(n>=o&&o+l>=n){u=g(f[0],f[1],h[0],h[1],(n-o)/l);break}o+=l}return u}function L(t,n){if(n>1||0>n||2>t.length)return 0;for(var r=q(t),a=r.segments,e=r.totalLength,o=0,u=0,i=0;a.length>i;i++){var c=a[i],f=c.from,h=c.to,l=c.length/e;if(n>=o&&o+l>=n){u=Math.atan2(h[1]-f[1],h[0]-f[0]);break}o+=l}return u}function S(t,n,r){for(var a=1/0,e=0;t.length-1>e;e++){var o=t[e],u=t[e+1],i=d(o[0],o[1],u[0],u[1],n,r);a>i&&(a=i)}return a}function j(t){for(var n=[],r=[],a=0;t.length>a;a++){var e=t[a];n.push(e[0]),r.push(e[1])}return u(n,r)}function B(t){var n=t.slice(0);return t.length&&n.push(t[0]),n}function D(t,n,r,a){var e=1-a;return e*e*t+2*a*e*n+a*a*r}function F(t,n,r){var a=t+r-2*n;if(y(a,0))return[.5];var e=(t-n)/a;return e>1||0>e?[]:[e]}function G(t,n,r,a,u,i,c){if(0===c)return(o(t,n,r,a)+o(r,a,u,i)+o(t,n,u,i))/2;var f=function(t,n,r,a,e,o,u){var i=D(t,r,e,u),c=D(n,a,o,u),f=g(t,n,r,a,u),h=g(r,a,e,o,u);return[[t,n,f.x,f.y,i,c],[i,c,h.x,h.y,e,o]]}(t,n,r,a,u,i,.5),h=f[0],l=f[1];return h.push(c-1),l.push(c-1),G.apply(void 0,e(h))+G.apply(void 0,e(l))}function N(t,n,r,a,e,o,u,i){return M([t,r,e],[n,a,o],u,i,D)}t.arcBox=function(t,n,r,a,e,o,u){for(var i=function(t,n,r){return Math.atan(-n/t*Math.tan(r))}(r,a,e),c=1/0,l=-1/0,s=[o,u],y=2*-Math.PI;2*Math.PI>=y;y+=Math.PI){var v=i+y;u>o?v>o&&u>v&&s.push(v):v>u&&o>v&&s.push(v)}for(var p=0;s.length>p;p++){var M=f(t,0,r,a,e,s[p]);c>M&&(c=M),M>l&&(l=M)}for(var g=function(t,n,r){return Math.atan(n/(t*Math.tan(r)))}(r,a,e),d=1/0,x=-1/0,b=[o,u],m=2*-Math.PI;2*Math.PI>=m;m+=Math.PI){var P=g+m;u>o?P>o&&u>P&&b.push(P):P>u&&o>P&&b.push(P)}for(var A=0;b.length>A;A++){var I=h(0,n,r,a,e,b[A]);d>I&&(d=I),I>x&&(x=I)}return{x:c,y:d,width:l-c,height:x-d}},t.arcNearestPoint=function(t,n,r,e,o,u,i,f,h){var y=a(s(f-t,h-n,-o),2),v=function(t,n,r,a,e,o){var u=r,i=a;if(0===u||0===i)return{x:t,y:n};for(var f=e-t,h=o-n,l=Math.abs(f),s=Math.abs(h),y=u*u,v=i*i,p=Math.PI/4,M=0,g=0,d=0;4>d;d++){M=u*Math.cos(p),g=i*Math.sin(p);var x=(y-v)*Math.pow(Math.cos(p),3)/u,b=(v-y)*Math.pow(Math.sin(p),3)/i,m=M-x,P=g-b,A=l-x,I=s-b,q=Math.hypot(P,m),w=Math.hypot(I,A);p=Math.min(Math.PI/2,Math.max(0,p+=q*Math.asin((m*I-P*A)/(q*w))/Math.sqrt(y+v-M*M-g*g)))}return{x:t+c(M,f),y:n+c(g,h)}}(0,0,r,e,y[0],y[1]),p=function(t,n,r,a){return(Math.atan2(a*t,r*n)+2*Math.PI)%(2*Math.PI)}(r,e,v.x,v.y);u>p?v=l(r,e,u):p>i&&(v=l(r,e,i));var M=s(v.x,v.y,o);return{x:M[0]+t,y:M[1]+n}},t.arcTangentAngle=function(t,n,r,a,e,o,u,c){var f=(u-o)*c+o,h=function(t,n,r,a,e,o,u,i){return-1*r*Math.cos(e)*Math.sin(i)-a*Math.sin(e)*Math.cos(i)}(0,0,r,a,e,0,0,f),l=function(t,n,r,a,e,o,u,i){return-1*r*Math.sin(e)*Math.sin(i)+a*Math.cos(e)*Math.cos(i)}(0,0,r,a,e,0,0,f);return i(Math.atan2(l,h))},t.cubicBox=function(t,n,r,a,e,o,i,c){for(var f=[t,i],h=[n,c],l=P(t,r,e,i),s=P(n,a,o,c),y=0;l.length>y;y++)f.push(b(t,r,e,i,l[y]));for(var v=0;s.length>v;v++)h.push(b(n,a,o,c,s[v]));return u(f,h)},t.cubicLength=function(t,n,r,a,e,o,u,i){return A(t,n,r,a,e,o,u,i,3)},t.cubicNearestPoint=I,t.cubicPointAt=function(t,n,r,a,e,o,u,i,c){return{x:b(t,r,e,u,c),y:b(n,a,o,i,c)}},t.cubicPointDistance=function(t,n,r,a,e,u,i,c,f,h,l){var s=I(t,n,r,a,e,u,i,c,f,h,l);return o(s.x,s.y,f,h)},t.cubicTangentAngle=function(t,n,r,a,e,o,u,c,f){var h=m(t,r,e,u,f),l=m(n,a,o,c,f);return i(Math.atan2(l,h))},t.distance=o,t.lineBox=function(t,n,r,a){return u([t,r],[n,a])},t.lineLength=function(t,n,r,a){return o(t,n,r,a)},t.linePointAt=g,t.linePointDistance=d,t.linePointToLine=x,t.lineTangentAngle=function(t,n,r,a){return Math.atan2(a-n,r-t)},t.polygonBox=function(t){return j(t)},t.polygonLength=function(t){return w(B(t))},t.polygonPointAt=function(t,n){return T(B(t),n)},t.polygonPointDistance=function(t,n,r){return S(B(t),n,r)},t.polygonTangentAngle=function(t,n){return L(B(t),n)},t.polylineBox=j,t.polylineLength=function(t){return w(t)},t.polylinePointAt=function(t,n){return T(t,n)},t.polylinePointDistance=function(t,n,r){return S(t,n,r)},t.polylineTangentAngle=function(t,n){return L(t,n)},t.quadBox=function(t,n,r,a,e,o){var i=F(t,r,e)[0],c=F(n,a,o)[0],f=[t,e],h=[n,o];return void 0!==i&&f.push(D(t,r,e,i)),void 0!==c&&h.push(D(n,a,o,c)),u(f,h)},t.quadLength=function(t,n,r,a,e,o){return G(t,n,r,a,e,o,3)},t.quadNearestPoint=N,t.quadPointDistance=function(t,n,r,a,e,u,i,c){var f=N(t,n,r,a,e,u,i,c);return o(f.x,f.y,i,c)}}));
//# sourceMappingURL=index.umd.min.js.map
