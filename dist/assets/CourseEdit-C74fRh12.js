var e=(e,l,a)=>new Promise((t,s)=>{var r=e=>{try{i(a.next(e))}catch(l){s(l)}},o=e=>{try{i(a.throw(e))}catch(l){s(l)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,o);i((a=a.apply(e,l)).next())});/* empty css             *//* empty css                   *//* empty css                *//* empty css                *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                  */import{y as l,r as a,j as t,aC as s,K as r,z as o,B as i,R as u,J as d,A as n,O as p,aB as c}from"./vue-vendor-BRizdQXW.js";import{u as m}from"./course-Ba9mJaVD.js";import{E as v,z as f,h,H as g,b as y,d as j,e as _,y as b,B as V}from"./element-plus-1qB5igSe.js";import{_ as C}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./storage-B26rRKbu.js";import"./index-BKrBH71_.js";const x={class:"course-edit"},w={class:"page-header"},E={class:"header-actions"},q={class:"edit-content"},B=C(l({__name:"CourseEdit",setup(l){const C=s(),B=c(),k=m(),z=a(!1),I=a(),R=a({title:"",description:"",level:CourseLevel.INTERMEDIATE}),U={title:[{required:!0,message:"请输入课程标题",trigger:"blur"}],description:[{required:!0,message:"请输入课程描述",trigger:"blur"}],level:[{required:!0,message:"请选择难度级别",trigger:"change"}]};t(()=>e(null,null,function*(){const e=C.params.id;e&&(yield A(e))}));const A=l=>e(null,null,function*(){try{z.value=!0;const e=yield k.fetchCourse(l);e&&(R.value={title:e.title,description:e.description,level:e.level})}catch(e){v.error("获取课程信息失败")}finally{z.value=!1}}),D=()=>e(null,null,function*(){try{if(!I.value)return;yield I.value.validate(),z.value=!0;const e=C.params.id;yield k.updateCourse(e,R.value),v.success("课程更新成功"),B.push(`/courses/${e}`)}catch(e){v.error("保存失败")}finally{z.value=!1}}),L=()=>{const e=C.params.id;B.push(`/courses/${e}`)};return(e,l)=>{const a=h,t=_,s=j,c=V,m=b,v=y,C=g,B=f;return r((n(),o("div",x,[i("div",w,[l[5]||(l[5]=i("div",{class:"header-content"},[i("h1",{class:"page-title"},"编辑课程"),i("p",{class:"page-description"},"修改课程信息和章节内容")],-1)),i("div",E,[u(a,{onClick:L},{default:d(()=>[...l[3]||(l[3]=[p("返回",-1)])]),_:1}),u(a,{type:"primary",onClick:D},{default:d(()=>[...l[4]||(l[4]=[p("保存",-1)])]),_:1})])]),i("div",q,[u(C,null,{header:d(()=>[...l[6]||(l[6]=[i("h3",null,"课程信息",-1)])]),default:d(()=>[u(v,{model:R.value,rules:U,ref_key:"formRef",ref:I,"label-width":"120px"},{default:d(()=>[u(s,{label:"课程标题",prop:"title"},{default:d(()=>[u(t,{modelValue:R.value.title,"onUpdate:modelValue":l[0]||(l[0]=e=>R.value.title=e),placeholder:"请输入课程标题"},null,8,["modelValue"])]),_:1}),u(s,{label:"课程描述",prop:"description"},{default:d(()=>[u(t,{modelValue:R.value.description,"onUpdate:modelValue":l[1]||(l[1]=e=>R.value.description=e),type:"textarea",rows:4,placeholder:"请输入课程描述"},null,8,["modelValue"])]),_:1}),u(s,{label:"难度级别",prop:"level"},{default:d(()=>[u(m,{modelValue:R.value.level,"onUpdate:modelValue":l[2]||(l[2]=e=>R.value.level=e),placeholder:"请选择难度级别"},{default:d(()=>[u(c,{label:"初级",value:"beginner"}),u(c,{label:"中级",value:"intermediate"}),u(c,{label:"高级",value:"advanced"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})])])),[[B,z.value]])}}}),[["__scopeId","data-v-1c80f318"]]);export{B as default};
