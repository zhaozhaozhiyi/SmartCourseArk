var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,l,s)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[l]=s,r=(e,t,l)=>new Promise((s,a)=>{var i=e=>{try{r(l.next(e))}catch(t){a(t)}},o=e=>{try{r(l.throw(e))}catch(t){a(t)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(i,o);r((l=l.apply(e,t)).next())});/* empty css             *//* empty css                   *//* empty css                *//* empty css                 *//* empty css                        *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                         *//* empty css                *//* empty css                  *//* empty css                    *//* empty css                  */import{h as n,G as c,H as d,I as u,c as p,J as v,K as m,s as f,L as h,M as g,N as y,O as b,C as k,b as j,d as w,e as _,y as I,B as C,P as x,Q as V,R as O,E as G}from"./element-plus-1qB5igSe.js";import{y as M,r as z,l as P,c as S,z as D,B as T,R as U,J as A,L as B,I as $,u as J,A as F,O as H,P as L,E as N,al as E,Q as K,a5 as R,aB as q,n as X}from"./vue-vendor-BRizdQXW.js";import{u as Q}from"./course-Ba9mJaVD.js";import{l as W,H as Y,s as Z,I as ee,J as te,K as le,k as se,C as ae,D as ie,u as oe,F as re}from"./index-CgjG02ur.js";import{D as ne}from"./documentParser-Ci1qDCwA.js";import{_ as ce}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./storage-B26rRKbu.js";import"./index-BKrBH71_.js";const de={class:"course-create"},ue={class:"page-header"},pe={class:"header-actions"},ve={class:"create-steps"},me={class:"step-content"},fe={key:0,class:"step-panel"},he={class:"upload-section"},ge={class:"upload-area"},ye={class:"upload-icon"},be={key:0,class:"file-info"},ke={class:"file-item"},je={class:"file-details"},we={class:"file-name"},_e={class:"file-size"},Ie={key:1,class:"step-panel"},Ce={key:0,class:"step-hint"},xe={key:0,class:"progress-indicator"},Ve={class:"markdown-streaming-container"},Oe={key:0,class:"markdown-preview"},Ge={class:"markdown-header"},Me={key:0,class:"streaming-indicator"},ze=["innerHTML"],Pe={key:1,class:"course-info-display"},Se={class:"course-overview-card"},De={class:"course-header"},Te={class:"course-title-area"},Ue={key:0,class:"course-title"},Ae={key:1,class:"course-title-placeholder"},Be={class:"course-meta"},$e={key:1,class:"level-placeholder"},Je={class:"course-description-area"},Fe={key:0,class:"course-description"},He={key:1,class:"description-placeholder"},Le={key:0,class:"objectives-card"},Ne={class:"card-header"},Ee={class:"card-title"},Ke={class:"objectives-grid"},Re={class:"objective-number"},qe={class:"objective-text"},Xe={key:1,class:"chapters-card"},Qe={class:"card-header"},We={class:"card-title"},Ye={class:"chapters-timeline"},Ze={class:"timeline-marker"},et={class:"marker-number"},tt={class:"timeline-content"},lt={class:"chapter-card"},st={class:"chapter-header"},at={class:"chapter-title"},it={class:"chapter-description"},ot={key:2,class:"waiting-state"},rt={class:"waiting-content"},nt={key:2,class:"step-panel"},ct={class:"completion-info"},dt={class:"success-icon"},ut={class:"completion-actions"},pt={class:"step-actions"},vt={class:"right-buttons"},mt={class:"dialog-content"},ft={class:"dialog-header"},ht={class:"dialog-title"},gt={class:"dialog-body"},yt={class:"objectives-edit"},bt={class:"chapters-edit"},kt={class:"chapter-edit-header"},jt={class:"chapter-number"},wt={class:"chapter-form-grid"},_t={class:"dialog-footer"},It={class:"footer-actions"},Ct=ce(M({__name:"CourseCreate",setup(e){W.add(Y,Z,ee,te,le,se,ae,ie,oe);const M=q(),ce=Q(),Ct=z(0),xt=z(!1),Vt=z(null),Ot=z(null),Gt=z(""),Mt=z(null),zt=z(!1),Pt=P({courseInfo:{title:{content:"",isGenerating:!1},description:{content:"",isGenerating:!1},level:{content:"",isGenerating:!1}},objectives:{items:[],currentGenerating:-1},chapters:{items:[],currentGenerating:-1},currentPhase:"",markdownContent:"",renderedMarkdown:"",isStreaming:!1}),St=z(!1),Dt=z(!1),Tt=z(!1),Ut=z(!1),At=z(!1),Bt=z({title:"",description:"",level:"intermediate"}),$t=z(!1),Jt=z(!1),Ft=z(),Ht=z(),Lt=P({title:"",description:"",level:"",objectives:[],chapters:[]}),Nt={title:[{required:!0,message:"请输入课程标题",trigger:"blur"},{min:2,max:100,message:"标题长度在 2 到 100 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入课程描述",trigger:"blur"},{min:10,max:500,message:"描述长度在 10 到 500 个字符",trigger:"blur"}],level:[{required:!0,message:"请选择难度级别",trigger:"change"}]},Et=S(()=>{switch(Ct.value){case 0:return null!==Vt.value;case 1:return null!==Ot.value&&!zt.value&&!Pt.isStreaming;default:return!0}}),Kt=()=>{M.push("/courses")},Rt=()=>r(null,null,function*(){if(Ct.value<2&&Ct.value++,1===Ct.value&&(yield Wt()),2===Ct.value)try{xt.value=!0,yield Yt()}catch(e){console.error("保存课程失败:",e),G.error("保存课程失败，请重试"),Ct.value=1}finally{xt.value=!1}}),qt=()=>{Ct.value>0&&Ct.value--},Xt=e=>["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"].includes(e.type)?e.size>52428800?(G.error("文件大小不能超过50MB"),!1):(Vt.value=e,setTimeout(()=>{Rt()},500),!1):(G.error("只支持PDF、DOC、DOCX、TXT格式的文件"),!1),Qt=()=>{Vt.value=null},Wt=()=>r(null,null,function*(){if(Vt.value)try{xt.value=!0,zt.value=!0,Pt.isStreaming=!0,Pt.courseInfo.title.content="",Pt.courseInfo.title.isGenerating=!1,Pt.courseInfo.description.content="",Pt.courseInfo.description.isGenerating=!1,Pt.courseInfo.level.content="",Pt.courseInfo.level.isGenerating=!1,Pt.objectives.items=[],Pt.objectives.currentGenerating=-1,Pt.chapters.items=[],Pt.chapters.currentGenerating=-1,Pt.currentPhase="",Pt.markdownContent="",Pt.renderedMarkdown="",Mt.value={message:"正在上传文档到Kimi...",type:"info"};const e=new ne;Mt.value={message:"正在生成课程信息和大纲...",type:"info"};const t=e=>{console.log("解析JSON内容:",e);try{let t=e.trim();t.startsWith("```json")?t=t.replace(/^```json\s*/,"").replace(/\s*```$/,""):t.startsWith("```")&&(t=t.replace(/^```\s*/,"").replace(/\s*```$/,""));const l=JSON.parse(t);l.courseTitle?(St.value=!0,Pt.courseInfo.title.content||(Pt.courseInfo.title.content=l.courseTitle,console.log("解析到课程标题:",Pt.courseInfo.title.content))):St.value=!1,l.courseDescription?(Dt.value=!0,Pt.courseInfo.description.content||(Pt.courseInfo.description.content=l.courseDescription,console.log("解析到课程描述:",Pt.courseInfo.description.content))):Dt.value=!1,l.difficulty?(Tt.value=!0,Pt.courseInfo.level.content||(Pt.courseInfo.level.content=l.difficulty,console.log("解析到难度级别:",Pt.courseInfo.level.content))):Tt.value=!1,l.learningObjectives&&Array.isArray(l.learningObjectives)?(Ut.value=!0,0===Pt.objectives.items.length&&(Pt.objectives.items=l.learningObjectives,console.log("解析到学习目标:",l.learningObjectives))):Ut.value=!1,l.chapters&&Array.isArray(l.chapters)?(At.value=!0,0===Pt.chapters.items.length&&(Pt.chapters.items=l.chapters.map(e=>({order:e.order,title:e.title,description:e.description,duration:e.durationMinutes||0,content:e.content||"",isGenerating:!1})),console.log("解析到章节:",l.chapters))):At.value=!1}catch(t){console.log("JSON解析失败，内容可能不完整:",t)}},l=yield e.generateCourseJsonStream(Vt.value,(e,l)=>{Pt.markdownContent=e,Pt.renderedMarkdown=`<pre>${e}</pre>`,il(),l?(Pt.isStreaming=!1,t(e)):(console.log("实时解析中，JSON长度:",e.length),t(e))});Ot.value=l,zt.value=!1,Bt.value.title=l.courseTitle,Bt.value.description=l.courseDescription,Bt.value.level=l.difficulty,Mt.value={message:"课程生成完成！请检查并编辑课程信息，然后点击下一步保存课程。",type:"success"},setTimeout(()=>{Mt.value=null},3e3)}catch(e){console.error("生成课程失败:",e),zt.value=!1,Pt.isStreaming=!1,Mt.value={message:`生成课程失败: ${e instanceof Error?e.message:"未知错误"}`,type:"error"}}finally{xt.value=!1}}),Yt=()=>r(null,null,function*(){try{const e=yield ce.createCourse({title:Bt.value.title,description:Bt.value.description,level:Bt.value.level});if(Gt.value=e.id,Ot.value&&Ot.value.chapters)for(const t of Ot.value.chapters)yield ce.createChapter(e.id,{title:t.title,description:t.description,content:t.content,orderIndex:t.order,durationMinutes:t.durationMinutes});G.success("课程创建成功！")}catch(e){throw console.error("创建课程失败:",e),G.error("创建课程失败"),e}}),Zt=()=>{M.push(`/courses/${Gt.value}`)},el=()=>{M.push(`/courses/${Gt.value}/edit`)},tl=()=>{M.push("/courses")},ll=()=>{Ct.value=0,Bt.value={title:"",description:"",level:"intermediate"},Vt.value=null,Ot.value=null,Gt.value="",Mt.value=null,Pt.courseInfo.title.content="",Pt.courseInfo.title.isGenerating=!1,Pt.courseInfo.description.content="",Pt.courseInfo.description.isGenerating=!1,Pt.courseInfo.level.content="",Pt.courseInfo.level.isGenerating=!1,Pt.objectives.items=[],Pt.objectives.currentGenerating=-1,Pt.chapters.items=[],Pt.chapters.currentGenerating=-1,Pt.currentPhase="",Pt.markdownContent="",Pt.renderedMarkdown="",Pt.isStreaming=!1},sl=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},al=e=>{switch(e){case"初级":return"success";case"中级":return"warning";case"高级":return"danger";default:return"info"}},il=()=>{X(()=>{Ht.value&&(Ht.value.scrollTop=Ht.value.scrollHeight)})},ol=()=>{Lt.title=Pt.courseInfo.title.content||"",Lt.description=Pt.courseInfo.description.content||"",Lt.level=Pt.courseInfo.level.content||"",Lt.objectives=[...Pt.objectives.items],Lt.chapters=Pt.chapters.items.map(e=>({order:e.order,title:e.title,description:e.description,duration:e.duration,content:e.content})),$t.value=!0},rl=()=>{$t.value=!1},nl=()=>r(null,null,function*(){if(Ft.value)try{yield Ft.value.validate(),Jt.value=!0,Pt.courseInfo.title.content=Lt.title,Pt.courseInfo.description.content=Lt.description,Pt.courseInfo.level.content=Lt.level,Pt.objectives.items=[...Lt.objectives],Pt.chapters.items=Lt.chapters.map(e=>{return r=((e,t)=>{for(var l in t||(t={}))a.call(t,l)&&o(e,l,t[l]);if(s)for(var l of s(t))i.call(t,l)&&o(e,l,t[l]);return e})({},e),t(r,l({isGenerating:!1}));var r}),Bt.value.title=Lt.title,Bt.value.description=Lt.description,Bt.value.level=Lt.level,G.success("课程信息已更新"),$t.value=!1}catch(e){console.error("表单验证失败:",e)}finally{Jt.value=!1}}),cl=()=>{Lt.objectives.length<10&&Lt.objectives.push("")},dl=()=>{if(Lt.chapters.length<20){const e=Lt.chapters.length+1;Lt.chapters.push({order:e,title:"",description:"",duration:30,content:""})}};return(e,t)=>{const l=n,s=v,a=c,i=m,o=d,r=f,G=b,M=k,z=E("Aim"),P=E("List"),S=_,q=w,X=C,Q=I,W=O,Y=j,Z=p;return F(),D("div",de,[T("div",ue,[t[5]||(t[5]=T("div",{class:"header-content"},[T("h1",{class:"page-title"},"创建课程"),T("p",{class:"page-description"},"上传文档，AI将自动为您生成课程大纲")],-1)),T("div",pe,[U(l,{onClick:Kt},{default:A(()=>[U(J(re),{icon:["fas","arrow-left"],class:"mr-2"}),t[4]||(t[4]=H(" 返回 ",-1))]),_:1})])]),T("div",ve,[U(a,{active:Ct.value,"finish-status":"success"},{default:A(()=>[U(s,{title:"上传文档",description:"上传课程源文档"}),U(s,{title:"AI生成课程",description:"AI生成课程信息和大纲"}),U(s,{title:"完成创建",description:"保存课程"})]),_:1},8,["active"])]),T("div",me,[0===Ct.value?(F(),D("div",fe,[U(o,null,{header:A(()=>[...t[6]||(t[6]=[T("h3",null,"上传课程文档",-1)])]),default:A(()=>[T("div",he,[U(i,{ref:"uploadRef","before-upload":Xt,"show-file-list":!1,accept:".pdf,.doc,.docx,.txt",drag:""},{default:A(()=>[T("div",ge,[T("div",ye,[U(J(re),{icon:["fas","cloud-upload-alt"]})]),t[7]||(t[7]=T("div",{class:"upload-text"},[T("p",null,"点击或拖拽文件到此处上传"),T("p",{class:"upload-tip"},"支持 PDF、DOC、DOCX、TXT 格式，文件大小不超过50MB")],-1))])]),_:1},512),Vt.value?(F(),D("div",be,[T("div",ke,[U(J(re),{icon:["fas","file"],class:"file-icon"}),T("div",je,[T("div",we,L(Vt.value.name),1),T("div",_e,L(sl(Vt.value.size)),1)]),U(l,{type:"text",onClick:Qt},{default:A(()=>[U(J(re),{icon:["fas","times"]})]),_:1})])])):B("",!0)])]),_:1})])):B("",!0),1===Ct.value?(F(),D("div",Ie,[U(o,null,{header:A(()=>[t[8]||(t[8]=T("h3",null,"AI生成课程信息和大纲",-1)),!Ot.value||zt.value||Pt.isStreaming?B("",!0):(F(),D("p",Ce,' 课程信息已生成完成，您可以编辑内容，然后点击"下一步"保存课程。 '))]),default:A(()=>[Pt.currentPhase?(F(),D("div",xe,[U(r,null,{default:A(()=>[U(J(h))]),_:1}),H(" "+L(Pt.currentPhase),1)])):B("",!0),Mt.value?(F(),D("div",{key:1,class:N(["parsing-status",Mt.value.type])},["info"===Mt.value.type?(F(),$(r,{key:0},{default:A(()=>[U(J(h))]),_:1})):"success"===Mt.value.type?(F(),$(r,{key:1},{default:A(()=>[U(J(g))]),_:1})):"error"===Mt.value.type?(F(),$(r,{key:2},{default:A(()=>[U(J(y))]),_:1})):B("",!0),H(" "+L(Mt.value.message),1)],2)):B("",!0),T("div",Ve,[Pt.markdownContent?(F(),D("div",Oe,[T("div",Ge,[t[10]||(t[10]=T("h4",null,"实时预览",-1)),Pt.isStreaming?(F(),D("div",Me,[U(r,null,{default:A(()=>[U(J(h))]),_:1}),t[9]||(t[9]=T("span",null,"正在生成...",-1))])):B("",!0)]),T("div",{ref_key:"markdownContentRef",ref:Ht,class:"markdown-content",innerHTML:Pt.renderedMarkdown},null,8,ze)])):B("",!0),Pt.courseInfo.title.content||Pt.courseInfo.description.content?(F(),D("div",Pe,[T("div",Se,[T("div",De,[T("div",Te,[Pt.courseInfo.title.content?(F(),D("h3",Ue,L(Pt.courseInfo.title.content),1)):(F(),D("div",Ae,[U(G,{variant:"text",style:{width:"60%"}})]))]),T("div",Be,[Pt.courseInfo.level.content?(F(),$(M,{key:0,type:al(Pt.courseInfo.level.content),size:"large",class:"level-tag"},{default:A(()=>[H(L(Pt.courseInfo.level.content),1)]),_:1},8,["type"])):(F(),D("div",$e,[U(G,{variant:"rect",style:{width:"80px",height:"24px"}})]))])]),T("div",Je,[Pt.courseInfo.description.content?(F(),D("p",Fe,L(Pt.courseInfo.description.content),1)):(F(),D("div",He,[U(G,{variant:"text",rows:3})]))])]),Pt.objectives.items.length>0?(F(),D("div",Le,[T("div",Ne,[T("h4",Ee,[U(r,null,{default:A(()=>[U(z)]),_:1}),t[11]||(t[11]=H(" 学习目标 ",-1))]),U(M,{type:"info",size:"small"},{default:A(()=>[H(L(Pt.objectives.items.length)+"个目标",1)]),_:1})]),T("div",Ke,[(F(!0),D(K,null,R(Pt.objectives.items,(e,t)=>(F(),D("div",{key:t,class:"objective-card"},[T("div",Re,L(t+1),1),T("div",qe,L(e),1)]))),128))])])):B("",!0),Pt.chapters.items.length>0?(F(),D("div",Xe,[T("div",Qe,[T("h4",We,[U(r,null,{default:A(()=>[U(P)]),_:1}),t[12]||(t[12]=H(" 课程章节 ",-1))]),U(M,{type:"success",size:"small"},{default:A(()=>[H(L(Pt.chapters.items.length)+"个章节",1)]),_:1})]),T("div",Ye,[(F(!0),D(K,null,R(Pt.chapters.items,(e,t)=>(F(),D("div",{key:t,class:"chapter-timeline-item"},[T("div",Ze,[T("div",et,L(e.order),1)]),T("div",tt,[T("div",lt,[T("div",st,[T("h5",at,L(e.title),1),e.duration>0?(F(),$(M,{key:0,size:"small",type:"info"},{default:A(()=>[H(L(e.duration)+"分钟 ",1)]),_:2},1024)):B("",!0)]),T("p",it,L(e.description),1)])])]))),128))])])):B("",!0)])):B("",!0),Pt.markdownContent||Pt.courseInfo.title.content?B("",!0):(F(),D("div",ot,[T("div",rt,[U(r,{class:"waiting-icon"},{default:A(()=>[U(J(h))]),_:1}),t[13]||(t[13]=T("p",null,"正在分析文档内容，准备生成课程信息...",-1))])]))])]),_:1})])):B("",!0),2===Ct.value?(F(),D("div",nt,[U(o,null,{header:A(()=>[...t[14]||(t[14]=[T("h3",null,"课程创建完成",-1)])]),default:A(()=>[T("div",ct,[T("div",dt,[U(J(re),{icon:["fas","check-circle"]})]),t[19]||(t[19]=T("h4",null,"课程创建成功！",-1)),T("p",null,'您的课程"'+L(Bt.value.title)+'"已经创建完成，现在可以开始编辑章节内容或开始学习。',1),T("div",ut,[U(l,{type:"primary",onClick:Zt},{default:A(()=>[U(J(re),{icon:["fas","eye"],class:"mr-2"}),t[15]||(t[15]=H(" 查看课程 ",-1))]),_:1}),U(l,{onClick:el},{default:A(()=>[U(J(re),{icon:["fas","edit"],class:"mr-2"}),t[16]||(t[16]=H(" 编辑课程 ",-1))]),_:1}),U(l,{onClick:tl},{default:A(()=>[U(J(re),{icon:["fas","list"],class:"mr-2"}),t[17]||(t[17]=H(" 返回列表 ",-1))]),_:1}),U(l,{onClick:ll},{default:A(()=>[U(J(re),{icon:["fas","plus"],class:"mr-2"}),t[18]||(t[18]=H(" 创建新课程 ",-1))]),_:1})])])]),_:1})])):B("",!0)]),T("div",pt,[Ct.value>0?(F(),$(l,{key:0,onClick:qt},{default:A(()=>[U(J(re),{icon:["fas","arrow-left"],class:"mr-2"}),t[20]||(t[20]=H(" 上一步 ",-1))]),_:1})):B("",!0),T("div",vt,[1!==Ct.value||!Ot.value||zt.value||Pt.isStreaming?B("",!0):(F(),$(l,{key:0,type:"default",icon:J(u),onClick:ol,class:"edit-course-btn"},{default:A(()=>[...t[21]||(t[21]=[H(" 编辑课程信息 ",-1)])]),_:1},8,["icon"])),Ct.value<2?(F(),$(l,{key:1,type:"primary",onClick:Rt,loading:xt.value,disabled:!Et.value},{default:A(()=>[t[22]||(t[22]=H(" 下一步 ",-1)),U(J(re),{icon:["fas","arrow-right"],class:"ml-2"})]),_:1},8,["loading","disabled"])):B("",!0)])]),U(Z,{modelValue:$t.value,"onUpdate:modelValue":t[3]||(t[3]=e=>$t.value=e),width:"900px",top:"80px","close-on-click-modal":!1,class:"edit-dialog","show-close":!1},{default:A(()=>[T("div",mt,[T("div",ft,[T("h3",ht,[U(r,null,{default:A(()=>[U(J(u))]),_:1}),t[23]||(t[23]=H(" 编辑课程信息 ",-1))]),t[24]||(t[24]=T("p",{class:"dialog-subtitle"},"您可以修改AI生成的课程内容，让课程更符合您的需求",-1))]),T("div",gt,[U(Y,{ref_key:"editFormRef",ref:Ft,model:Lt,rules:Nt,"label-width":"100px","label-position":"top",class:"edit-form"},{default:A(()=>[U(q,{label:"课程标题",prop:"title"},{default:A(()=>[U(S,{modelValue:Lt.title,"onUpdate:modelValue":t[0]||(t[0]=e=>Lt.title=e),placeholder:"请输入课程标题",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),U(q,{label:"课程描述",prop:"description"},{default:A(()=>[U(S,{modelValue:Lt.description,"onUpdate:modelValue":t[1]||(t[1]=e=>Lt.description=e),type:"textarea",rows:4,placeholder:"请输入课程描述",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),U(q,{label:"难度级别",prop:"level"},{default:A(()=>[U(Q,{modelValue:Lt.level,"onUpdate:modelValue":t[2]||(t[2]=e=>Lt.level=e),placeholder:"请选择难度级别",style:{width:"200px"}},{default:A(()=>[U(X,{label:"初级",value:"初级"}),U(X,{label:"中级",value:"中级"}),U(X,{label:"高级",value:"高级"})]),_:1},8,["modelValue"])]),_:1}),U(q,{label:"学习目标"},{default:A(()=>[T("div",yt,[(F(!0),D(K,null,R(Lt.objectives,(e,t)=>(F(),D("div",{key:t,class:"objective-edit-item"},[U(S,{modelValue:Lt.objectives[t],"onUpdate:modelValue":e=>Lt.objectives[t]=e,placeholder:`学习目标 ${t+1}`,maxlength:"200","show-word-limit":"",size:"large"},null,8,["modelValue","onUpdate:modelValue","placeholder"]),U(l,{type:"danger",icon:J(x),circle:"",size:"large",onClick:e=>(e=>{Lt.objectives.length>1&&Lt.objectives.splice(e,1)})(t),disabled:Lt.objectives.length<=1},null,8,["icon","onClick","disabled"])]))),128)),U(l,{type:"primary",icon:J(V),size:"large",onClick:cl,disabled:Lt.objectives.length>=10,class:"add-objective-btn"},{default:A(()=>[...t[25]||(t[25]=[H(" 添加学习目标 ",-1)])]),_:1},8,["icon","disabled"])])]),_:1}),U(q,{label:"课程章节"},{default:A(()=>[T("div",bt,[(F(!0),D(K,null,R(Lt.chapters,(e,t)=>(F(),D("div",{key:t,class:"chapter-edit-item"},[T("div",kt,[T("span",jt,"第"+L(e.order)+"章",1),U(l,{type:"danger",icon:J(x),circle:"",size:"large",onClick:e=>(e=>{Lt.chapters.length>1&&(Lt.chapters.splice(e,1),Lt.chapters.forEach((e,t)=>{e.order=t+1}))})(t),disabled:Lt.chapters.length<=1},null,8,["icon","onClick","disabled"])]),T("div",wt,[U(q,{label:"章节标题",prop:`chapters.${t}.title`,class:"chapter-title-field"},{default:A(()=>[U(S,{modelValue:e.title,"onUpdate:modelValue":t=>e.title=t,placeholder:"请输入章节标题",maxlength:"100","show-word-limit":"",size:"large"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]),U(q,{label:"预计时长（分钟）",prop:`chapters.${t}.duration`,class:"chapter-duration-field"},{default:A(()=>[U(W,{modelValue:e.duration,"onUpdate:modelValue":t=>e.duration=t,min:1,max:300,placeholder:"请输入预计时长",size:"large","controls-position":"right"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),U(q,{label:"章节描述",prop:`chapters.${t}.description`,class:"chapter-description-field"},{default:A(()=>[U(S,{modelValue:e.description,"onUpdate:modelValue":t=>e.description=t,type:"textarea",rows:3,placeholder:"请输入章节描述",maxlength:"300","show-word-limit":"",size:"large"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]))),128)),U(l,{type:"primary",icon:J(V),size:"large",onClick:dl,disabled:Lt.chapters.length>=20,class:"add-chapter-btn"},{default:A(()=>[...t[26]||(t[26]=[H(" 添加章节 ",-1)])]),_:1},8,["icon","disabled"])])]),_:1})]),_:1},8,["model"])]),T("div",_t,[T("div",It,[U(l,{onClick:rl},{default:A(()=>[U(r,null,{default:A(()=>[U(J(y))]),_:1}),t[27]||(t[27]=H(" 取消 ",-1))]),_:1}),U(l,{type:"primary",onClick:nl,loading:Jt.value,class:"save-button"},{default:A(()=>[Jt.value?B("",!0):(F(),$(r,{key:0},{default:A(()=>[U(J(g))]),_:1})),H(" "+L(Jt.value?"保存中...":"保存修改"),1)]),_:1},8,["loading"])])])])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-a80db49a"]]);export{Ct as default};
