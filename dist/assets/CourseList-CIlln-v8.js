var e=(e,a,s)=>new Promise((l,r)=>{var t=e=>{try{n(s.next(e))}catch(a){r(a)}},o=e=>{try{n(s.throw(e))}catch(a){r(a)}},n=e=>e.done?l(e.value):Promise.resolve(e.value).then(t,o);n((s=s.apply(e,a)).next())});/* empty css             *//* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                 *//* empty css                    *//* empty css                  *//* empty css                         */import{y as a,r as s,j as l,Y as r,z as t,B as o,K as n,L as i,R as u,J as c,u as d,Q as p,a5 as v,A as m,O as f,P as g,W as h,aB as y}from"./vue-vendor-BRizdQXW.js";import{l as C,u as k,A as j,b,B as _,C as w,D as x,v as z,c as V,E as $,G as B,j as D,a as S,F as U}from"./index-CgjG02ur.js";import{u as A}from"./course-DWSJBfyD.js";import{C as E}from"./CourseEditDialog-CzUCGkrO.js";import{E as q,h as I,e as P,y as F,z as L,A as G,B as J,C as T,v as H,w as K,q as M,D as N,F as O}from"./element-plus-1qB5igSe.js";import{_ as Q}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./storage-B26rRKbu.js";import"./index-B0rpCtHA.js";/* empty css                   *//* empty css                *//* empty css                        *//* empty css                     */const R={class:"course-list"},W={class:"page-header"},Y={class:"header-actions"},X={class:"search-section"},Z={class:"search-bar"},ee={class:"filter-bar"},ae={class:"course-grid"},se={key:0,class:"empty-state"},le={class:"empty-icon"},re=["onClick"],te={class:"course-header"},oe={class:"course-status"},ne={class:"course-actions"},ie={class:"course-content"},ue={class:"course-title"},ce={class:"course-description"},de={class:"course-stats"},pe={class:"stat-item"},ve={class:"stat-item"},me={key:0,class:"stat-item"},fe={class:"course-footer"},ge={class:"course-date"},he={key:0,class:"course-progress"},ye={key:0,class:"pagination"},Ce=Q(a({__name:"CourseList",setup(a){C.add(k,j,b,_,w,x,z,V,$,B,D,S);const Q=y(),Ce=A(),ke=s(!1),je=s([]),be=s(0),_e=s(1),we=s(10),xe=s({keyword:"",level:void 0,status:void 0,page:1,pageSize:10}),ze=s(!1),Ve=s(null);l(()=>{$e()}),r(()=>{$e()});const $e=()=>e(null,null,function*(){try{ke.value=!0,xe.value.page=_e.value,xe.value.pageSize=we.value,console.log("开始获取课程列表...",xe.value);const e=yield Ce.fetchCourses(xe.value);console.log("课程列表响应:",e),je.value=e.courses,be.value=e.total}catch(e){console.error("获取课程列表失败:",e),q.error(`获取课程列表失败: ${e instanceof Error?e.message:"未知错误"}`)}finally{ke.value=!1}}),Be=()=>{_e.value=1,$e()},De=e=>{we.value=e,_e.value=1,$e()},Se=e=>{_e.value=e,$e()},Ue=()=>{Q.push("/courses/create")},Ae=e=>{Q.push(`/courses/${e}`)},Ee=e=>{const a=je.value.findIndex(a=>a.id===e.id);-1!==a&&(je.value[a]=e),ze.value=!1,Ve.value=null},qe=e=>{switch(e){case"published":return"success";case"draft":return"warning";default:return"info"}},Ie=e=>{switch(e){case"published":return"已发布";case"draft":return"草稿";case"archived":return"已归档";default:return"未知"}},Pe=e=>{switch(e){case"beginner":return"success";case"intermediate":return"warning";case"advanced":return"danger";default:return"info"}},Fe=e=>{switch(e){case"beginner":return"初级";case"intermediate":return"中级";case"advanced":return"高级";default:return"未知"}},Le=e=>{if(!e)return"0分钟";if(e<60)return`${e}分钟`;const a=Math.floor(e/60),s=e%60;return s>0?`${a}小时${s}分钟`:`${a}小时`};return(a,s)=>{const l=I,r=P,y=J,C=F,k=T,j=K,b=H,_=M,w=N,x=G,z=L;return m(),t("div",R,[o("div",W,[s[8]||(s[8]=o("div",{class:"header-content"},[o("h1",{class:"page-title"},"课程管理"),o("p",{class:"page-description"},"管理您的所有课程，创建新的学习内容")],-1)),o("div",Y,[u(l,{type:"primary",onClick:Ue},{default:c(()=>[u(d(U),{icon:["fas","plus"],class:"mr-2"}),s[7]||(s[7]=f(" 创建课程 ",-1))]),_:1})])]),o("div",X,[o("div",Z,[u(r,{modelValue:xe.value.keyword,"onUpdate:modelValue":s[0]||(s[0]=e=>xe.value.keyword=e),placeholder:"搜索课程标题或描述...",clearable:"",onInput:Be},{prefix:c(()=>[u(d(U),{icon:["fas","search"]})]),_:1},8,["modelValue"])]),o("div",ee,[u(C,{modelValue:xe.value.level,"onUpdate:modelValue":s[1]||(s[1]=e=>xe.value.level=e),placeholder:"难度级别",clearable:"",onChange:Be},{default:c(()=>[u(y,{label:"初级",value:"beginner"}),u(y,{label:"中级",value:"intermediate"}),u(y,{label:"高级",value:"advanced"})]),_:1},8,["modelValue"]),u(C,{modelValue:xe.value.status,"onUpdate:modelValue":s[2]||(s[2]=e=>xe.value.status=e),placeholder:"课程状态",clearable:"",onChange:Be},{default:c(()=>[u(y,{label:"草稿",value:"draft"}),u(y,{label:"已发布",value:"published"}),u(y,{label:"已归档",value:"archived"})]),_:1},8,["modelValue"])])]),n((m(),t("div",ae,[0!==je.value.length||ke.value?i("",!0):(m(),t("div",se,[o("div",le,[u(d(U),{icon:["fas","book-open"]})]),s[10]||(s[10]=o("h3",null,"暂无课程",-1)),s[11]||(s[11]=o("p",null,"开始创建您的第一个课程吧！",-1)),u(l,{type:"primary",onClick:Ue},{default:c(()=>[u(d(U),{icon:["fas","plus"],class:"mr-2"}),s[9]||(s[9]=f(" 创建课程 ",-1))]),_:1})])),(m(!0),t(p,null,v(je.value,a=>{var r,n;return m(),t("div",{key:a.id,class:"course-card",onClick:e=>Ae(a.id)},[o("div",te,[o("div",oe,[u(k,{type:qe(a.status)},{default:c(()=>[f(g(Ie(a.status)),1)]),_:2},1032,["type"]),u(k,{type:Pe(a.level),size:"small"},{default:c(()=>[f(g(Fe(a.level)),1)]),_:2},1032,["type"])]),o("div",ne,[u(_,{trigger:"click",onClick:s[3]||(s[3]=h(()=>{},["stop"]))},{dropdown:c(()=>[u(b,null,{default:c(()=>[u(j,{onClick:e=>Ae(a.id)},{default:c(()=>[u(d(U),{icon:["fas","eye"],class:"mr-2"}),s[12]||(s[12]=f(" 查看详情 ",-1))]),_:1},8,["onClick"]),u(j,{onClick:e=>(e=>{Ve.value=e,ze.value=!0})(a)},{default:c(()=>[u(d(U),{icon:["fas","edit"],class:"mr-2"}),s[13]||(s[13]=f(" 编辑课程 ",-1))]),_:1},8,["onClick"]),u(j,{onClick:e=>{return s=a.id,void Q.push(`/courses/${s}/learn`);var s}},{default:c(()=>[u(d(U),{icon:["fas","play"],class:"mr-2"}),s[14]||(s[14]=f(" 开始学习 ",-1))]),_:1},8,["onClick"]),u(j,{onClick:e=>{return s=a.id,void Q.push(`/questions/generate/${s}`);var s}},{default:c(()=>[u(d(U),{icon:["fas","question-circle"],class:"mr-2"}),s[15]||(s[15]=f(" 题库管理 ",-1))]),_:1},8,["onClick"]),u(j,{onClick:s=>(a=>e(null,null,function*(){try{yield O.confirm(`确定要删除课程"${a.title}"吗？此操作不可撤销。`,"删除确认",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}),yield Ce.deleteCourse(a.id),q.success("课程删除成功"),$e()}catch(e){"cancel"!==e&&(console.error("删除课程失败:",e),q.error("删除课程失败"))}}))(a),divided:""},{default:c(()=>[u(d(U),{icon:["fas","trash"],class:"mr-2"}),s[16]||(s[16]=f(" 删除课程 ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),default:c(()=>[u(l,{type:"text",size:"small"},{default:c(()=>[u(d(U),{icon:["fas","ellipsis-v"]})]),_:1})]),_:2},1024)])]),o("div",ie,[o("h3",ue,g(a.title),1),o("p",ce,g(a.description),1),o("div",de,[o("div",pe,[u(d(U),{icon:["fas","list"]}),o("span",null,g((null==(r=a.chapters)?void 0:r.length)||0)+" 章节",1)]),o("div",ve,[u(d(U),{icon:["fas","clock"]}),o("span",null,g(Le(a.totalDuration)),1)]),void 0!==a.progress?(m(),t("div",me,[u(d(U),{icon:["fas","chart-line"]}),o("span",null,g(a.progress)+"% 完成",1)])):i("",!0)])]),o("div",fe,[o("div",ge,[o("span",null,"创建于 "+g((n=a.createdAt,new Date(n).toLocaleDateString("zh-CN",{year:"numeric",month:"short",day:"numeric"}))),1)]),void 0!==a.progress?(m(),t("div",he,[u(w,{percentage:a.progress,"stroke-width":4,"show-text":!1},null,8,["percentage"])])):i("",!0)])],8,re)}),128))])),[[z,ke.value]]),be.value>0?(m(),t("div",ye,[u(x,{"current-page":_e.value,"onUpdate:currentPage":s[4]||(s[4]=e=>_e.value=e),"page-size":we.value,"onUpdate:pageSize":s[5]||(s[5]=e=>we.value=e),total:be.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:De,onCurrentChange:Se},null,8,["current-page","page-size","total"])])):i("",!0),u(E,{modelValue:ze.value,"onUpdate:modelValue":s[6]||(s[6]=e=>ze.value=e),course:Ve.value,onSaved:Ee},null,8,["modelValue","course"])])}}}),[["__scopeId","data-v-d361e865"]]);export{Ce as default};
