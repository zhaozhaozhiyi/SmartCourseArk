var e=(e,a,l)=>new Promise((s,t)=>{var o=e=>{try{i(l.next(e))}catch(a){t(a)}},u=e=>{try{i(l.throw(e))}catch(a){t(a)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,u);i((l=l.apply(e,a)).next())});/* empty css             *//* empty css                *//* empty css                  *//* empty css                    *//* empty css                          *//* empty css                 *//* empty css                        *//* empty css                     *//* empty css               *//* empty css                  *//* empty css                  */import{y as a,r as l,j as s,z as t,B as o,R as u,I as i,L as r,J as n,A as d,u as c,Q as m,a5 as p,O as v,P as f,aB as y}from"./vue-vendor-BRizdQXW.js";import{l as g,W as h,F as b}from"./index-CgjG02ur.js";import{u as _}from"./practice-6QDq9InZ.js";import{u as q}from"./course-DWSJBfyD.js";import{a as I}from"./storage-B26rRKbu.js";import{E as j,H as L,b as C,d as x,y as S,B as V,R as T,W as k,f as P,h as E,C as U}from"./element-plus-1qB5igSe.js";import{_ as B}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-B0rpCtHA.js";const $={class:"practice-config"},F={class:"config-content"},G={class:"card-header"},w={class:"stats-grid"},J={class:"stat-item"},M={class:"stat-value"},N={class:"stat-item"},z={class:"stat-value"},Q={class:"stat-item"},R={class:"stat-value"},A={class:"stat-item"},D={class:"stat-value"},O=B(a({__name:"PracticeConfig",setup(a){g.add(h);const B=y(),O=_(),W=q(),H=l(),X=l(!1),Y=l([]),K=l(null),Z=l({mode:"comprehensive",courseId:"",questionBankId:"",questionCount:10,questionTypes:[I.SINGLE,I.MULTIPLE],timeLimit:void 0}),ee={courseId:[{required:!0,message:"请选择课程",trigger:"change"}],questionCount:[{required:!0,message:"请设置题目数量",trigger:"blur"}],questionTypes:[{required:!0,message:"请选择至少一种题目类型",trigger:"change"}]};s(()=>e(null,null,function*(){yield ae(),yield le()}));const ae=()=>e(null,null,function*(){try{const e=yield W.fetchCourses();Y.value=e.courses}catch(e){console.error("获取课程列表失败:",e),j.error("获取课程列表失败")}}),le=()=>e(null,null,function*(){try{Z.value.courseId?K.value=yield O.getPracticeStats(Z.value.courseId):K.value=yield O.getPracticeStats()}catch(e){console.error("获取练习统计失败:",e)}}),se=()=>e(null,null,function*(){Z.value.courseId&&(yield le())}),te=()=>e(null,null,function*(){if(H.value)try{if(!(yield H.value.validate()))return;X.value=!0;const e={questionCount:Z.value.questionCount,questionTypes:Z.value.questionTypes};localStorage.setItem("practice-default-config",JSON.stringify(e));const a=yield O.createPracticeSession(Z.value);j.success("练习会话创建成功"),B.push(`/practice/${Z.value.courseId}/session/${a.id}`)}catch(e){console.error("开始练习失败:",e),j.error(e.message||"开始练习失败")}finally{X.value=!1}}),oe=()=>{var e;null==(e=H.value)||e.resetFields(),Z.value={mode:"comprehensive",courseId:"",questionBankId:"",questionCount:10,questionTypes:[I.SINGLE,I.MULTIPLE],timeLimit:void 0}},ue=()=>{B.push("/practice/history")},ie=e=>{if(e<60)return`${e}秒`;const a=Math.floor(e/60),l=e%60;return l>0?`${a}分${l}秒`:`${a}分钟`};return(e,a)=>{const l=U,s=V,y=S,g=x,h=T,_=P,q=k,j=E,B=L;return d(),t("div",$,[a[20]||(a[20]=o("div",{class:"page-header"},[o("div",{class:"header-content"},[o("h1",{class:"page-title"},"练习配置"),o("p",{class:"page-description"},"配置您的练习参数，开始个性化练习")])],-1)),o("div",F,[u(B,{class:"config-card"},{header:n(()=>[o("div",G,[a[5]||(a[5]=o("span",null,"练习设置",-1)),u(l,{type:"info",size:"small"},{default:n(()=>[...a[4]||(a[4]=[v("配置将保存为默认设置",-1)])]),_:1})])]),default:n(()=>[u(c(C),{model:Z.value,rules:ee,ref_key:"configFormRef",ref:H,"label-width":"120px"},{default:n(()=>[u(g,{label:"选择课程",prop:"courseId"},{default:n(()=>[u(y,{modelValue:Z.value.courseId,"onUpdate:modelValue":a[0]||(a[0]=e=>Z.value.courseId=e),placeholder:"请选择课程",onChange:se},{default:n(()=>[(d(!0),t(m,null,p(Y.value,e=>(d(),i(s,{key:e.id,label:e.title,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(g,{label:"题目数量",prop:"questionCount"},{default:n(()=>[u(h,{modelValue:Z.value.questionCount,"onUpdate:modelValue":a[1]||(a[1]=e=>Z.value.questionCount=e),min:5,max:50,placeholder:"题目数量"},null,8,["modelValue"])]),_:1}),u(g,{label:"题目类型",prop:"questionTypes"},{default:n(()=>[u(q,{modelValue:Z.value.questionTypes,"onUpdate:modelValue":a[2]||(a[2]=e=>Z.value.questionTypes=e)},{default:n(()=>[u(_,{label:c(I).SINGLE},{default:n(()=>[...a[6]||(a[6]=[v("单选题",-1)])]),_:1},8,["label"]),u(_,{label:c(I).MULTIPLE},{default:n(()=>[...a[7]||(a[7]=[v("多选题",-1)])]),_:1},8,["label"]),u(_,{label:c(I).JUDGE},{default:n(()=>[...a[8]||(a[8]=[v("判断题",-1)])]),_:1},8,["label"]),u(_,{label:c(I).FILL},{default:n(()=>[...a[9]||(a[9]=[v("填空题",-1)])]),_:1},8,["label"]),u(_,{label:c(I).ESSAY},{default:n(()=>[...a[10]||(a[10]=[v("简答题",-1)])]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1}),u(g,{label:"时间限制"},{default:n(()=>[u(h,{modelValue:Z.value.timeLimit,"onUpdate:modelValue":a[3]||(a[3]=e=>Z.value.timeLimit=e),min:5,max:120,placeholder:"时间限制(分钟)"},null,8,["modelValue"]),a[11]||(a[11]=o("span",{class:"form-tip"},"留空表示无时间限制",-1))]),_:1}),u(g,null,{default:n(()=>[u(j,{type:"primary",onClick:te,loading:X.value},{default:n(()=>[...a[12]||(a[12]=[v(" 开始练习 ",-1)])]),_:1},8,["loading"]),u(j,{onClick:oe},{default:n(()=>[...a[13]||(a[13]=[v("重置",-1)])]),_:1}),u(j,{onClick:ue},{default:n(()=>[u(c(b),{icon:["fas","history"],class:"mr-2"}),a[14]||(a[14]=v(" 查看历史 ",-1))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),K.value?(d(),i(B,{key:0,class:"stats-card"},{header:n(()=>[...a[15]||(a[15]=[o("div",{class:"card-header"},[o("span",null,"练习统计")],-1)])]),default:n(()=>[o("div",w,[o("div",J,[o("div",M,f(K.value.totalSessions),1),a[16]||(a[16]=o("div",{class:"stat-label"},"总练习次数",-1))]),o("div",N,[o("div",z,f(K.value.averageScore)+"%",1),a[17]||(a[17]=o("div",{class:"stat-label"},"平均得分",-1))]),o("div",Q,[o("div",R,f(K.value.totalQuestions),1),a[18]||(a[18]=o("div",{class:"stat-label"},"总题目数",-1))]),o("div",A,[o("div",D,f(ie(K.value.totalDuration)),1),a[19]||(a[19]=o("div",{class:"stat-label"},"总练习时长",-1))])])]),_:1})):r("",!0)])])}}}),[["__scopeId","data-v-f2005e04"]]);export{O as default};
