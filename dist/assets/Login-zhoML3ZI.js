/* empty css             *//* empty css                   *//* empty css                *//* empty css                  *//* empty css                    *//* empty css                     *//* empty css                 */import{y as e,r as a,l,z as s,B as o,R as r,u as i,J as n,ah as t,A as d,aB as u,O as c,P as m}from"./vue-vendor-BRizdQXW.js";import{b as p,c as v,d as g,e as f,u as y,l as _,f as w,g as h,h as b,E as x}from"./element-plus-1qB5igSe.js";import{l as j,f as V,F as k}from"./index-CgjG02ur.js";import{u as z}from"./index-BKrBH71_.js";import{_ as $}from"./_plugin-vue_export-helper-BCo6x5W8.js";const C=(e,a)=>null==e||""===e||"string"==typeof e&&""===e.trim()?{valid:!1,message:`${a}不能为空`}:{valid:!0,message:""},E=(e,a,l,s)=>"string"!=typeof e?{valid:!1,message:`${s}必须是字符串`}:e.length<a?{valid:!1,message:`${s}长度不能少于${a}位`}:e.length>l?{valid:!1,message:`${s}长度不能超过${l}位`}:{valid:!0,message:""},U={class:"login-container"},P={class:"login-box"},A={class:"login-header"},B={class:"logo"},F={class:"login-options"},I={class:"demo-accounts"},R={class:"demo-buttons"},q=$(e({__name:"Login",setup(e){j.add(V);const $=u(),q=z(),J=a(),K=a(!1),L=a(!1),O=a(!1),D=l({username:"",password:""}),G={username:[{validator:(e,a,l)=>{const s=C(a,"用户名");if(s.valid){const e=E(a,3,20,"用户名");e.valid?l():l(new Error(e.message))}else l(new Error(s.message))},trigger:"blur"}],password:[{validator:(e,a,l)=>{const s=C(a,"密码");if(s.valid){const e=E(a,6,20,"密码");e.valid?l():l(new Error(e.message))}else l(new Error(s.message))},trigger:"blur"}]},H=()=>{return e=null,a=null,l=function*(){if(J.value)try{if(!(yield J.value.validate()))return;K.value=!0,yield q.login(D),x.success("登录成功，欢迎使用智课方舟！"),$.push("/")}catch(e){x.error(e.message||"登录失败")}finally{K.value=!1}},new Promise((s,o)=>{var r=e=>{try{n(l.next(e))}catch(a){o(a)}},i=e=>{try{n(l.throw(e))}catch(a){o(a)}},n=e=>e.done?s(e.value):Promise.resolve(e.value).then(r,i);n((l=l.apply(e,a)).next())});var e,a,l},M=()=>{O.value=!0},N=e=>{"admin"===e?(D.username="admin",D.password="123456",x.info("已填入管理员账号")):"user"===e&&(D.username="user",D.password="123456",x.info("已填入普通用户账号"))};return(e,a)=>{const l=f,u=g,x=w,j=h,V=b,z=p,$=v;return d(),s("div",U,[o("div",P,[o("div",A,[o("div",B,[r(i(k),{icon:["fas","graduation-cap"]})]),a[7]||(a[7]=o("h1",{class:"title"},"智课方舟",-1)),a[8]||(a[8]=o("p",{class:"subtitle"},"智能课程平台，让学习更高效",-1)),a[9]||(a[9]=o("div",{class:"slogan"},[o("span",{class:"slogan-text"},"AI驱动的个性化学习体验")],-1))]),r(z,{ref_key:"loginFormRef",ref:J,model:D,rules:G,class:"login-form",onKeyup:t(H,["enter"])},{default:n(()=>[r(u,{prop:"username"},{default:n(()=>[r(l,{modelValue:D.username,"onUpdate:modelValue":a[0]||(a[0]=e=>D.username=e),placeholder:"请输入用户名",size:"large","prefix-icon":i(y),clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),r(u,{prop:"password"},{default:n(()=>[r(l,{modelValue:D.password,"onUpdate:modelValue":a[1]||(a[1]=e=>D.password=e),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":i(_),"show-password":"",clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),r(u,null,{default:n(()=>[o("div",F,[r(x,{modelValue:L.value,"onUpdate:modelValue":a[2]||(a[2]=e=>L.value=e)},{default:n(()=>[...a[10]||(a[10]=[c("记住我",-1)])]),_:1},8,["modelValue"]),r(j,{type:"primary",underline:!1,onClick:M},{default:n(()=>[...a[11]||(a[11]=[c("忘记密码？",-1)])]),_:1})])]),_:1}),r(u,null,{default:n(()=>[o("div",I,[a[14]||(a[14]=o("p",{class:"demo-title"},"演示账号",-1)),o("div",R,[r(V,{size:"small",onClick:a[3]||(a[3]=e=>N("admin")),type:"primary",plain:""},{default:n(()=>[...a[12]||(a[12]=[c(" 管理员账号 ",-1)])]),_:1}),r(V,{size:"small",onClick:a[4]||(a[4]=e=>N("user")),type:"success",plain:""},{default:n(()=>[...a[13]||(a[13]=[c(" 普通用户 ",-1)])]),_:1})])])]),_:1}),r(u,null,{default:n(()=>[r(V,{type:"primary",size:"large",loading:K.value,onClick:H,class:"login-btn"},{default:n(()=>[c(m(K.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),a[17]||(a[17]=o("div",{class:"login-bg"},[o("div",{class:"bg-circle circle-1"}),o("div",{class:"bg-circle circle-2"}),o("div",{class:"bg-circle circle-3"})],-1)),r($,{modelValue:O.value,"onUpdate:modelValue":a[6]||(a[6]=e=>O.value=e),title:"忘记密码",width:"400px","close-on-click-modal":!1},{footer:n(()=>[r(V,{onClick:a[5]||(a[5]=e=>O.value=!1)},{default:n(()=>[...a[15]||(a[15]=[c("关闭",-1)])]),_:1})]),default:n(()=>[a[16]||(a[16]=o("div",{class:"forgot-password-content"},[o("p",{class:"forgot-password-text"}," 请联系系统管理员重置密码，或使用以下演示账号： "),o("div",{class:"demo-accounts-dialog"},[o("div",{class:"account-item"},[o("strong",null,"管理员账号："),o("span",null,"admin / 123456")]),o("div",{class:"account-item"},[o("strong",null,"普通用户："),o("span",null,"user / 123456")])])],-1))]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-b4a2c093"]]);export{q as default};
