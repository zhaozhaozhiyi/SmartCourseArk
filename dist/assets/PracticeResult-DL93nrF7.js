var s=(s,e,a)=>new Promise((t,r)=>{var l=s=>{try{i(a.next(s))}catch(e){r(e)}},c=s=>{try{i(a.throw(s))}catch(e){r(e)}},i=s=>s.done?t(s.value):Promise.resolve(s.value).then(l,c);i((a=a.apply(s,e)).next())});/* empty css             *//* empty css                    *//* empty css                         *//* empty css                  *//* empty css               *//* empty css                */import{y as e,r as a,c as t,aC as r,j as l,aB as c,z as i,B as o,L as n,P as u,R as d,J as v,A as p,E as m,Q as f,a5 as y,O as h,u as j}from"./vue-vendor-BRizdQXW.js";import{l as w,_,G as g,g as Q,F as b}from"./index-CgjG02ur.js";import{u as k}from"./practice-Bc4ZWhMF.js";import{u as C}from"./course-Ba9mJaVD.js";import{E as x,H as I,h as P,S as $,C as q}from"./element-plus-1qB5igSe.js";import{_ as A}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./storage-B26rRKbu.js";import"./index-BKrBH71_.js";const B={class:"practice-result"},E={class:"result-header"},F={class:"header-content"},L={class:"result-subtitle"},O={key:0,class:"result-content"},R={class:"summary-content"},S={class:"score-display"},z={class:"score-value"},G={class:"score-info"},H={class:"score-title"},J={class:"score-description"},K={class:"summary-stats"},M={class:"stat-item"},X={class:"stat-value"},D={class:"stat-item"},N={class:"stat-value"},T={class:"stat-item"},U={class:"stat-value"},V={class:"stat-item"},W={class:"stat-value"},Y={class:"details-content"},Z={class:"answer-header"},ss={class:"answer-number"},es={class:"answer-status"},as={class:"answer-content"},ts={class:"answer-question"},rs={class:"answer-user"},ls={key:0,class:"answer-correct"},cs={class:"result-actions"},is={key:1,class:"loading-container"},os=A(e({__name:"PracticeResult",setup(e){w.add(_,g,Q);const A=r(),os=c(),ns=k(),us=C(),ds=a(!1),vs=a(null),ps=t(()=>A.params.courseId),ms=t(()=>A.params.sessionId),fs=t(()=>{const s=us.courses.find(s=>s.id===ps.value);return(null==s?void 0:s.title)||"未知课程"});l(()=>s(null,null,function*(){yield ys()}));const ys=()=>s(null,null,function*(){try{ds.value=!0;const s=yield ns.fetchPracticeSession(ms.value);s?vs.value={sessionId:s.id,score:s.score||0,totalQuestions:s.totalQuestions,correctQuestions:s.correctQuestions,incorrectQuestions:s.totalQuestions-s.correctQuestions,duration:s.duration,answers:s.answers}:(x.error("练习结果不存在"),os.push("/practice"))}catch(s){console.error("加载练习结果失败:",s),x.error("加载练习结果失败"),os.push("/practice")}finally{ds.value=!1}}),hs=s=>s>=90?"优秀":s>=80?"良好":s>=60?"及格":"需要努力",js=s=>s>=90?"恭喜您！表现非常出色！":s>=80?"做得很好！继续保持！":s>=60?"不错！还有提升空间。":"加油！多练习会有进步的！",ws=s=>{if(s<60)return`${s}秒`;const e=Math.floor(s/60),a=s%60;return a>0?`${e}分${a}秒`:`${e}分钟`},_s=s=>Array.isArray(s)?s.join(", "):s,gs=()=>{os.push("/practice")},Qs=()=>{os.push("/practice/list")},bs=()=>{os.push(`/courses/${ps.value}`)};return(s,e)=>{const a=I,t=q,r=P,l=$;return p(),i("div",B,[o("div",E,[o("div",F,[e[0]||(e[0]=o("h1",{class:"result-title"},"练习结果",-1)),o("p",L,u(fs.value),1)])]),vs.value?(p(),i("div",O,[d(a,{class:"result-summary"},{default:v(()=>{return[o("div",R,[o("div",S,[o("div",{class:m(["score-circle",(s=vs.value.score,s>=90?"excellent":s>=80?"good":s>=60?"average":"poor")])},[o("div",z,u(vs.value.score),1),e[1]||(e[1]=o("div",{class:"score-label"},"分",-1))],2),o("div",G,[o("h2",H,u(hs(vs.value.score)),1),o("p",J,u(js(vs.value.score)),1)])]),o("div",K,[o("div",M,[o("div",X,u(vs.value.totalQuestions),1),e[2]||(e[2]=o("div",{class:"stat-label"},"总题数",-1))]),o("div",D,[o("div",N,u(vs.value.correctQuestions),1),e[3]||(e[3]=o("div",{class:"stat-label"},"正确数",-1))]),o("div",T,[o("div",U,u(vs.value.incorrectQuestions),1),e[4]||(e[4]=o("div",{class:"stat-label"},"错误数",-1))]),o("div",V,[o("div",W,u(ws(vs.value.duration)),1),e[5]||(e[5]=o("div",{class:"stat-label"},"用时",-1))])])])];var s}),_:1}),d(a,{class:"result-details"},{header:v(()=>[...e[6]||(e[6]=[o("div",{class:"card-header"},[o("span",null,"详细结果")],-1)])]),default:v(()=>[o("div",Y,[(p(!0),i(f,null,y(vs.value.answers,(s,a)=>(p(),i("div",{key:a,class:"answer-item"},[o("div",Z,[o("div",ss,"第 "+u(a+1)+" 题",1),o("div",es,[d(t,{type:s.isCorrect?"success":"danger"},{default:v(()=>[h(u(s.isCorrect?"正确":"错误"),1)]),_:2},1032,["type"])])]),o("div",as,[o("div",ts,[e[7]||(e[7]=o("strong",null,"题目:",-1)),h(" "+u((s.questionId,"题目内容...")),1)]),o("div",rs,[e[8]||(e[8]=o("strong",null,"您的答案:",-1)),h(" "+u(_s(s.userAnswer)),1)]),s.isCorrect?n("",!0):(p(),i("div",ls,[e[9]||(e[9]=o("strong",null,"正确答案:",-1)),h(" "+u((s.questionId,"正确答案...")),1)]))])]))),128))])]),_:1}),o("div",cs,[d(r,{type:"primary",onClick:gs},{default:v(()=>[d(j(b),{icon:["fas","redo"],class:"mr-2"}),e[10]||(e[10]=h(" 重新练习 ",-1))]),_:1}),d(r,{onClick:Qs},{default:v(()=>[d(j(b),{icon:["fas","list"],class:"mr-2"}),e[11]||(e[11]=h(" 练习列表 ",-1))]),_:1}),d(r,{onClick:bs},{default:v(()=>[d(j(b),{icon:["fas","book"],class:"mr-2"}),e[12]||(e[12]=h(" 课程详情 ",-1))]),_:1})])])):n("",!0),ds.value?(p(),i("div",is,[d(l,{rows:5,animated:""})])):n("",!0)])}}}),[["__scopeId","data-v-f608628d"]]);export{os as default};
