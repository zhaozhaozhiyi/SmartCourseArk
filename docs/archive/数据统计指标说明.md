# 数据统计指标说明文档

## 1. 概述

本文档详细说明了智能交互式课程创建工具中各个数据统计指标的定义、计算方式和展示形式。

## 2. 核心业务指标

### 2.1 课程相关指标

#### 2.1.1 课程数量
- **指标名称**: 课程数量
- **指标描述**: 系统中课程的总数量
- **计算方式**: 统计所有状态为"已发布"、"草稿"、"归档"的课程总数
- **数据来源**: `courses` 表
- **展示单位**: 门
- **更新频率**: 实时更新

#### 2.1.2 新增课程数
- **指标名称**: 新增课程数
- **指标描述**: 指定时间段内新增的课程数量
- **计算方式**: 按创建时间统计指定时间段内的课程数量
- **数据来源**: `courses` 表的 `created_at` 字段
- **展示单位**: 门
- **更新频率**: 按日/月更新

#### 2.1.3 课程完成率
- **指标名称**: 课程完成率
- **指标描述**: 用户完成课程学习的比例
- **计算方式**: (完成课程学习的用户数 / 开始学习课程的用户数) × 100%
- **数据来源**: `learning_records` 表
- **展示单位**: %
- **更新频率**: 按日更新

### 2.2 试题相关指标

#### 2.2.1 试题数量
- **指标名称**: 试题数量
- **指标描述**: 系统中题库的总题目数量
- **计算方式**: 统计所有状态为"已发布"的题目总数
- **数据来源**: `questions` 表
- **展示单位**: 道
- **更新频率**: 实时更新

#### 2.2.2 新增试题数
- **指标名称**: 新增试题数
- **指标描述**: 指定时间段内新增的题目数量
- **计算方式**: 按创建时间统计指定时间段内的题目数量
- **数据来源**: `questions` 表的 `created_at` 字段
- **展示单位**: 道
- **更新频率**: 按日/月更新

#### 2.2.3 题目类型分布
- **指标名称**: 题目类型分布
- **指标描述**: 各类型题目的数量分布
- **计算方式**: 按题目类型分组统计数量
- **数据来源**: `questions` 表的 `type` 字段
- **展示单位**: 道
- **更新频率**: 实时更新
- **题目类型**: 单选题、多选题、判断题、填空题、简答题

### 2.3 学习行为指标

#### 2.3.1 学习时长
- **指标名称**: 学习时长
- **指标描述**: 用户总学习时间
- **计算方式**: 统计所有学习会话的时长总和
- **数据来源**: `study_sessions` 表的 `duration_minutes` 字段
- **展示单位**: 小时
- **更新频率**: 实时更新

#### 2.3.2 新增学习时长
- **指标名称**: 新增学习时长
- **指标描述**: 指定时间段内新增的学习时长
- **计算方式**: 按学习时间统计指定时间段内的学习时长
- **数据来源**: `study_sessions` 表的 `start_time` 字段
- **展示单位**: 小时
- **更新频率**: 按日/月更新

#### 2.3.3 练习次数
- **指标名称**: 练习次数
- **指标描述**: 用户总练习次数
- **计算方式**: 统计所有练习记录的总数
- **数据来源**: `learning_records` 表
- **展示单位**: 次
- **更新频率**: 实时更新

#### 2.3.4 新增练习次数
- **指标名称**: 新增练习次数
- **指标描述**: 指定时间段内新增的练习次数
- **计算方式**: 按练习时间统计指定时间段内的练习次数
- **数据来源**: `learning_records` 表的 `created_at` 字段
- **展示单位**: 次
- **更新频率**: 按日/月更新

#### 2.3.5 答题正确率
- **指标名称**: 答题正确率
- **指标描述**: 用户答题的总体正确率
- **计算方式**: (正确答题数 / 总答题数) × 100%
- **数据来源**: `learning_records` 表
- **展示单位**: %
- **更新频率**: 实时更新

### 2.4 系统性能指标

#### 2.4.1 系统响应时间
- **指标名称**: 系统响应时间
- **指标描述**: API接口平均响应时间
- **计算方式**: 统计所有API请求的平均响应时间
- **数据来源**: 系统监控日志
- **展示单位**: 毫秒
- **更新频率**: 实时更新

## 3. 数据展示规范

### 3.1 概览卡片展示
- **布局**: 4列网格布局
- **卡片内容**: 指标名称、当前值、总数值、单位
- **颜色方案**: 
  - 课程相关: 蓝色系
  - 试题相关: 绿色系
  - 用户相关: 橙色系
  - 系统相关: 紫色系

### 3.2 图表展示
- **趋势图**: 折线图展示时间趋势
- **分布图**: 饼图展示数据分布
- **对比图**: 柱状图展示数据对比
- **进度图**: 进度条展示完成度

### 3.3 数据更新
- **实时数据**: 用户数、课程数、试题数
- **准实时数据**: 学习记录、答题记录
- **定时数据**: 访问统计、性能指标

## 4. 数据统计API接口

### 4.1 概览数据接口
```
GET /api/analysis/overview
```

**响应格式**:
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "courseCount": 15,
    "questionCount": 1250,
    "totalStudyHours": 2450,
    "totalPracticeCount": 15600,
    "newCoursesThisMonth": 3,
    "newQuestionsThisMonth": 180,
    "newStudyHoursThisMonth": 245,
    "newPracticeCountThisMonth": 2340,
    "averageAccuracy": 82.3,
    "averageResponseTime": 245
  }
}
```

### 4.2 趋势数据接口
```
GET /api/analysis/trends?type=course&period=month
```

**参数说明**:
- `type`: 数据类型 (course/question/user/visit)
- `period`: 时间周期 (day/week/month/year)

### 4.3 分布数据接口
```
GET /api/analysis/distribution?type=question
```

**参数说明**:
- `type`: 分布类型 (question_type/course_level/user_role)

## 5. 数据质量保证

### 5.1 数据准确性
- 定期校验数据一致性
- 设置数据异常告警
- 建立数据审核机制

### 5.2 数据完整性
- 确保关键指标数据不缺失
- 建立数据备份机制
- 设置数据恢复流程

### 5.3 数据时效性
- 实时数据延迟 < 1分钟
- 准实时数据延迟 < 5分钟
- 定时数据按计划更新

## 6. 监控和告警

### 6.1 关键指标监控
- 用户注册量异常波动
- 课程创建量异常下降
- 系统响应时间超阈值
- 数据更新失败

### 6.2 告警机制
- 邮件通知
- 短信提醒
- 系统内消息
- 钉钉/企业微信通知

## 7. 数据安全

### 7.1 数据脱敏
- 用户敏感信息脱敏
- 学习记录匿名化
- 统计数据聚合处理

### 7.2 访问控制
- 基于角色的数据访问权限
- API接口访问频率限制
- 数据导出权限控制

---

*最后更新时间: 2025-10-25*
*文档版本: v1.0*
